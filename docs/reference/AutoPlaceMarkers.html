<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>AutoPlaceMarkers for ERG/VEP Recordings — AutoPlaceMarkers • ERGtools2</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="AutoPlaceMarkers for ERG/VEP Recordings — AutoPlaceMarkers"><meta property="og:description" content="These methods automatically place markers for ERG/VEP recordings in an ERGExam object."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ERGtools2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>AutoPlaceMarkers for ERG/VEP Recordings</h1>
    
    <div class="hidden name"><code>AutoPlaceMarkers.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These methods automatically place markers for ERG/VEP recordings in an <a href="ERGExam.html">ERGExam</a> object.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">AutoPlaceMarkers</span><span class="op">(</span>
  <span class="va">X</span>,
  Channel.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">pairlist</a></span><span class="op">(</span>ERG <span class="op">=</span> <span class="st">"ERG"</span>, VEP <span class="op">=</span> <span class="st">"VEP"</span><span class="op">)</span>,
  Stimulus.type.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">pairlist</a></span><span class="op">(</span>Flash <span class="op">=</span> <span class="st">"Flash"</span>, Flicker <span class="op">=</span> <span class="st">"Flicker"</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu">AutoPlaceAB</span><span class="op">(</span>
  <span class="va">X</span>,
  robust.peak.filter.bands <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">75</span><span class="op">)</span>,
  true.peak.tolerance <span class="op">=</span> <span class="fu">as_units</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70</span>, <span class="fl">30</span><span class="op">)</span>, <span class="st">"ms"</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu">AutoPlaceFlicker</span><span class="op">(</span>
  <span class="va">X</span>,
  robust.peak.filter.bands <span class="op">=</span> <span class="fu">as_units</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">300</span><span class="op">)</span>, <span class="st">"Hz"</span><span class="op">)</span>,
  true.peak.tolerance <span class="op">=</span> <span class="fu">as_units</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">15</span><span class="op">)</span>, <span class="st">"ms"</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu">AutoPlaceVEP</span><span class="op">(</span>
  <span class="va">X</span>,
  robust.peak.filter.bands <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">75</span><span class="op">)</span>,
  true.peak.tolerance <span class="op">=</span> <span class="fu">as_units</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fl">20</span><span class="op">)</span>, <span class="st">"ms"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>X</dt>
<dd><p>An <a href="ERGExam.html">ERGExam</a> object for <code>AutoPlaceMarkers()</code> or an <a href="https://rdrr.io/pkg/EPhysData/man/EPhysData-class.html" class="external-link">EPhysData::EPhysData-class</a> object for the lower level methods AutoPlaceAB, AutoPlaceFlicker or AutoPlaceVEP.</p></dd>


<dt>Channel.names</dt>
<dd><p>A <code>pairlist</code> specifying channel names.</p></dd>


<dt>Stimulus.type.names</dt>
<dd><p>A <a href="https://rdrr.io/r/base/list.html" class="external-link">base::pairlist</a> specifying the names identifying the different stimulus types, e.g., <code>Flash="Flash"</code> or <code>Flash="Blitz"</code>.</p></dd>


<dt>robust.peak.filter.bands</dt>
<dd><p>A numeric vector of length 2 specifying the lower and upper bounds of the frequency band used for initial peak idetification n the lowe-level methods</p></dd>


<dt>true.peak.tolerance</dt>
<dd><p>A vector of class units and length 2 specifying the tolerance range around true peaks. Must be time values (i.e. a unit convertibel into 'seconds').</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An updated <code>ERGExam</code> object with markers placed.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>These methods are used to automatically place markers for ERGs/VEPs.<br><br><code>AutoPlaceMarkers()</code> sets markers depending on the channel (E.g. ERG, VEP, OP,...) and stimulus type (Flash, Flicker), defined via the <code>Channel.names</code> and <code>Stimulus.type.names</code> arguments. Markers are placed using the lower level methods AutoPlaceAB, AutoPlaceFlicker or AutoPlaceVEP function depending on the stimulus type.<br><br>
AutoPlaceAB, AutoPlaceFlicker and AutoPlaceVEP are the lower level functions which perform the actual marker placement on the <a href="https://rdrr.io/pkg/EPhysData/man/EPhysData-class.html" class="external-link">EPhysData::EPhysData-class</a> objects contained in the <a href="ERGExam.html">ERGExam</a> object. These methods are usually not called directly by a user, unless she/he wants to perform or re-run marker placement only on certain recordings while leaving previously set markers unchanged for the others.
There working principle is that they apply robust peak filtering within defined frequency bands (low frequency band by default) to locate the gross position of the most prominent peaks peaks and then look for the peak in data using the preset filter function (FilterFunction) to accurately identify the actual peak position. <br><br>
Currently, supported are:</p><ul><li><p>a and B waves for Flash ERG</p></li>
<li><p>N1, P1 (and Frequency) for Flicker ERGs</p></li>
<li><p>P1, N1, and P2 for Flash ERGs <br><br></p></li>
</ul></div>
    <div id="functions">
    <h2>Functions</h2>
    
<ul><li><p><code>AutoPlaceMarkers()</code>: Automatically sets markers depending on the channel (E.g. ERG, VEP, OP,...) and stimulus type (Flash, FLicker).</p></li>
<li><p><code>AutoPlaceAB()</code>: places the a and B waves on Flash ERG data stored in an an <a href="https://rdrr.io/pkg/EPhysData/man/EPhysData-class.html" class="external-link">EPhysData::EPhysData-class</a> object.</p></li>
<li><p><code>AutoPlaceFlicker()</code>: places the N1 and P1 markers and determines 1/frequency (period) for Flicker ERG data stored in an an <a href="https://rdrr.io/pkg/EPhysData/man/EPhysData-class.html" class="external-link">EPhysData::EPhysData-class</a> object</p></li>
<li><p><code>AutoPlaceVEP()</code>: places the P1, N1 and P2 markers for Flash VEP data stored in an an <a href="https://rdrr.io/pkg/EPhysData/man/EPhysData-class.html" class="external-link">EPhysData::EPhysData-class</a> object</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ERG</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ERG</span><span class="op">&lt;-</span><span class="fu"><a href="UpdateProcessingMethods.html">SetStandardFunctions</a></span><span class="op">(</span><span class="va">ERG</span><span class="op">)</span></span>
<span class="r-in"><span class="va">imported_Markers</span><span class="op">&lt;-</span><span class="fu"><a href="Measurements-Methods.html">Measurements</a></span><span class="op">(</span><span class="va">ERG</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Retrieving record values for the given time points.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ================================================================================</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">imported_Markers</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Recording Step     Description Channel Result Eye Name Relative       Time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         1    1 DA 0 01 cd s m      ERG      1  RE    a     &lt;NA&gt; 0.0315 [s]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         1    1 DA 0 01 cd s m      ERG      1  RE    B        a 0.0515 [s]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         2    1 DA 0 01 cd s m      ERG      1  LE    a     &lt;NA&gt; 0.0315 [s]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         2    1 DA 0 01 cd s m      ERG      1  LE    B        a 0.0505 [s]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         5    2    DA 1 cd s m      ERG      1  RE    a     &lt;NA&gt; 0.0130 [s]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         5    2    DA 1 cd s m      ERG      1  RE    B        a 0.0355 [s]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Voltage Channel_Name Recording.y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  -53.17071 [uV]          ERG           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  346.34079 [uV]          ERG           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  -79.03807 [uV]          ERG           2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  303.53579 [uV]          ERG           2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 -202.88360 [uV]          ERG           5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  544.37543 [uV]          ERG           5</span>
<span class="r-in"><span class="va">ERG</span><span class="op">&lt;-</span><span class="fu"><a href="Measurements-Methods.html">ClearMeasurements</a></span><span class="op">(</span><span class="va">ERG</span><span class="op">)</span></span>
<span class="r-in"><span class="va">imported_Markers_cleared</span><span class="op">&lt;-</span><span class="fu"><a href="Measurements-Methods.html">Measurements</a></span><span class="op">(</span><span class="va">ERG</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">imported_Markers_cleared</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] Recording   Step        Description Channel     Result      Eye        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] Name        Relative    Time        Voltage    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;0 rows&gt; (or 0-length row.names)</span>
<span class="r-in"><span class="va">ERG</span><span class="op">&lt;-</span><span class="fu">AutoPlaceMarkers</span><span class="op">(</span><span class="va">ERG</span>, Channel.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">pairlist</a></span><span class="op">(</span>ERG <span class="op">=</span> <span class="st">"ERG"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ================================================================================</span>
<span class="r-in"><span class="va">autoplaced_Markers</span><span class="op">&lt;-</span><span class="fu"><a href="Measurements-Methods.html">Measurements</a></span><span class="op">(</span><span class="va">ERG</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Retrieving record values for the given time points.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ================================================================================</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">autoplaced_Markers</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Recording Step     Description Channel Result Eye Name Relative       Time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         1    1 DA 0 01 cd s m      ERG      1  RE    a     &lt;NA&gt; 0.0315 [s]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         1    1 DA 0 01 cd s m      ERG      1  RE    B        a 0.0515 [s]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         2    1 DA 0 01 cd s m      ERG      1  LE    a     &lt;NA&gt; 0.0310 [s]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         2    1 DA 0 01 cd s m      ERG      1  LE    B        a 0.0505 [s]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         5    2    DA 1 cd s m      ERG      1  RE    a     &lt;NA&gt; 0.0125 [s]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         5    2    DA 1 cd s m      ERG      1  RE    B        a 0.0355 [s]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Voltage Channel_Name Recording.y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  -53.17071 [uV]          ERG           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  346.34079 [uV]          ERG           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  -85.88321 [uV]          ERG           2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  310.38093 [uV]          ERG           2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 -206.37706 [uV]          ERG           5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  547.86889 [uV]          ERG           5</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Calling AutoPlaceAB() directly</span></span>
<span class="r-in"><span class="va">X</span><span class="op">&lt;-</span><span class="va">ERG</span><span class="op">@</span><span class="va">Data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="co"># get first recording</span></span>
<span class="r-in"><span class="fu">AutoPlaceAB</span><span class="op">(</span><span class="va">X</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Time          Value Relative</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a 31.5 [ms] -53170.71 [nV]     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B 51.5 [ms] 346340.79 [nV]        a</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Moritz Lindner.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

